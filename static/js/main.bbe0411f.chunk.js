(this.webpackJsonptoboard=this.webpackJsonptoboard||[]).push([[0],{289:function(e,t,n){},291:function(e,t,n){},317:function(e,t){},319:function(e,t){},328:function(e,t){},330:function(e,t){},355:function(e,t){},357:function(e,t){},358:function(e,t){},363:function(e,t){},365:function(e,t){},371:function(e,t){},373:function(e,t){},392:function(e,t){},404:function(e,t){},407:function(e,t){},433:function(e,t){},542:function(e,t,n){"use strict";n.r(t);var r=n(28),c=n.n(r),o=(n(289),n(1)),a=n.n(o),i=n(5),s=n(19),u=(n(291),n(0)),l=n.n(u),j=n(580),b=n(581),f=n(270),p=n.n(f),d=n(271),O=n.n(d),g=n(272),h=n.n(g),x=n(273),v=n.n(x),m=n(576),y=n(41),S=Object(y.b)({}),E=n(6);function w(){var e=l.a.useState("/"),t=Object(s.a)(e,2),n=t[0],r=t[1],c=S.location.pathname;return n!==c&&r(c),Object(E.jsx)(m.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(E.jsxs)(j.a,{value:n,onChange:function(e,t){r(t),S.push(t)},showLabels:!0,children:["location.pathname",Object(E.jsx)(b.a,{label:"Home",value:"/",icon:Object(E.jsx)(p.a,{})}),Object(E.jsx)(b.a,{label:"Favorites",value:"/favorites",icon:Object(E.jsx)(O.a,{})}),Object(E.jsx)(b.a,{label:"Weekly Progress",value:"/weekly",icon:Object(E.jsx)(h.a,{})}),Object(E.jsx)(b.a,{label:"Settings",value:"/settings",icon:Object(E.jsx)(v.a,{})})]})})}var k=n(29),C=n(545),I=n(275),N=n.n(I),D=n(274),F=n.n(D),J=n(42),R=new(n.n(J).a)({apiToken:"2ae0238cb610dc7c2f940e02379097a4"});function P(e,t){R.getCurrentTimeEntry((function(n,r){n?console.log(n):r?(console.log("Something already running: ",r.description,r.pid),console.log("Checking if it is:",e),r.pid===e.pid&&r.description===e.description?(console.log("Matched! Stopping"),function(e,t){console.log("Stopping: "+e),R.stopTimeEntry(e,(function(e,n){e?console.log(e):(t("{}"),console.log("succefully stopped ",n))}))}(r.id,t)):(console.log("Not Matched! Starting new"),z(e,t))):(console.log("Nothing running! Starting new"),z(e,t))}))}function z(e,t){R.startTimeEntry({description:e.description,pid:e.pid},(function(e,n){e?console.log(e):(t(n),console.log(t,"Succefully started: ",n))}))}var G=Object(u.createContext)({currentEntry:{},setCurrentEntry:function(e){},entries:[],setEntries:{},projects:[],setProjects:{},goals:[],setGoals:function(e){},favorites:[],setFavorites:function(e){}});function A(e){var t=l.a.useState(e.entry.isRunning),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(u.useContext)(G),a=o.currentEntry,i=o.setCurrentEntry;e.entry.isRunning=r||!1;return Object(u.useEffect)((function(){a&&c(a.description===e.entry.description)}),[a,e.entry.description]),Object(E.jsx)(C.a,{size:"large",startIcon:r?Object(E.jsx)(F.a,{fontSize:"large"}):Object(E.jsx)(N.a,{fontSize:"large"}),variant:"contained",color:"primary",onClick:function(){c(!e.entry.isRunning),P(e.entry,i)},children:e.entry.description})}function T(e){return Object(E.jsx)(A,{entry:e.favorite,showLabel:!0})}var W=n(54),B=n(584),H=n(136),K=n.n(H),L=n(544),M=n(582),U=n(276),V=n(49);Object(U.a)({apiKey:"AIzaSyArKcDUA8f9UYE7JyhhSJrbO1lyUK6fmWw",authDomain:"toboard-e8982.firebaseapp.com",projectId:"toboard-e8982",storageBucket:"toboard-e8982.appspot.com",messagingSenderId:"1038554107141",appId:"1:1038554107141:web:e0f0e94ee798443df0fb6c"});var Y=Object(V.e)(),q=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=3;break;case 3:return e.next=5,Object(V.f)(Object(V.c)(Y,"users","2ae0238cb610dc7c2f940e02379097a4".toString(),"projects",t.id.toString()),{project:t});case 5:console.log("Project sent to db"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error sending project to db: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=3;break;case 3:return e.next=5,Object(V.a)(Object(V.b)(Y,"users","2ae0238cb610dc7c2f940e02379097a4".toString(),"goals"),{project:t});case 5:n=e.sent,console.log("Goal sent to db:",n.id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error sending Goal to db: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.next=3;break;case 3:return e.next=5,Object(V.a)(Object(V.b)(Y,"users","2ae0238cb610dc7c2f940e02379097a4".toString(),"favorites"),{project:t});case 5:n=e.sent,console.log("Favorite sent to db: ",n.id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error sending favorite to db: ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(i.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,Object(V.d)(Object(V.b)(Y,"users","2ae0238cb610dc7c2f940e02379097a4".toString(),"favorites"));case 4:return t=e.sent,n=[],t.forEach((function(e){console.log("Received favorite from db: ",e.id," => ",e.data().project),n.push(e.data().project)})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function $(e){var t=Object(u.useState)(""),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(u.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],j=Object(u.useContext)(G),b=j.favorites,f=j.setFavorites,p=Object(u.useState)(!1),d=Object(s.a)(p,2),O=d[0],g=d[1];return O?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(L.a,{children:[Object(E.jsx)("h4",{children:"New Favorite"}),Object(E.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(E.jsx)(B.a,{id:"description",label:"Description",onChange:function(e){return c(e.target.value)},placeholder:"",variant:"outlined"}),Object(E.jsx)(B.a,{id:"project",label:"Project",onChange:function(e){return l(e.target.value)},placeholder:"",variant:"outlined"})]}),Object(E.jsxs)(M.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(E.jsx)(C.a,{onClick:function(){var e={description:r,project:i,position:b.length};X([e]),f([].concat(Object(W.a)(b),[e])),g(!1)},children:"Save"}),Object(E.jsx)(C.a,{onClick:function(){return g(!1)},children:"Cancel"})]})]})}):Object(E.jsx)(C.a,{startIcon:Object(E.jsx)(K.a,{fontSize:"large"}),onClick:function(){return g(!0)},size:"large",variant:"contained",color:"primary",children:"New Favorite"})}function _(){var e=Object(u.useContext)(G).favorites;return console.log("Favorites:",e),Object(E.jsxs)(E.Fragment,{children:[e.map((function(e){return Object(E.jsx)(T,{favorite:e},e.position)})),Object(E.jsx)("br",{}),Object(E.jsx)($,{})]})}var ee=n(94);function te(){return Object(E.jsxs)("div",{children:[" Welcome to toboard!",Object(E.jsx)("li",{children:Object(E.jsx)(ee.b,{to:"/",children:"Home"})}),Object(E.jsx)("li",{children:Object(E.jsx)(ee.b,{to:"/favorites",children:"Favorites"})})]})}var ne=n(13),re=n(583);function ce(e){var t=Object(ne.a)((function(t){return{root:{height:50,borderRadius:5},colorPrimary:{backgroundColor:t.palette.grey["light"===t.palette.type?200:700]},bar:{borderRadius:5,backgroundColor:e.color}}}))(re.a);return Object(E.jsx)(t,{variant:e.isRunning?"buffer":"determinate",value:e.value,valueBuffer:0})}function oe(e){return Object(E.jsxs)("div",{children:[Object(E.jsx)(ce,{isRunning:!0,value:10,color:"red"}),Object(E.jsx)(A,{entry:e.goal,showLabel:!0})]})}function ae(e){var t=Object(u.useState)(""),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(u.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],j=Object(u.useState)(""),b=Object(s.a)(j,2),f=b[0],p=b[1],d=Object(u.useContext)(G),O=d.goals,g=d.setGoals,h=Object(u.useState)(!1),x=Object(s.a)(h,2),v=x[0],m=x[1];return v?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(L.a,{children:[Object(E.jsx)("h4",{children:"New Weekly Goal"}),Object(E.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(E.jsx)(B.a,{id:"description",label:"Description",onChange:function(e){return c(e.target.value)},placeholder:"",variant:"outlined"}),Object(E.jsx)(B.a,{id:"project",label:"Project",onChange:function(e){return l(e.target.value)},placeholder:"",variant:"outlined"}),Object(E.jsx)(B.a,{id:"target",label:"Target in minutes",onChange:function(e){return p(e.target.value)},placeholder:"",variant:"outlined"})]}),Object(E.jsxs)(M.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:[Object(E.jsx)(C.a,{onClick:function(){var e={description:r,project:i,position:O.length,target:f};Q([e]),g([].concat(Object(W.a)(O),[e])),m(!1)},children:"Save"}),Object(E.jsx)(C.a,{onClick:function(){return m(!1)},children:"Cancel"})]})]})}):Object(E.jsx)(C.a,{startIcon:Object(E.jsx)(K.a,{fontSize:"large"}),onClick:function(){return m(!0)},size:"large",variant:"contained",color:"primary",children:"New Weekly Goal"})}function ie(){var e=Object(u.useContext)(G).goals;return console.log("Goals:",e),Object(E.jsxs)(E.Fragment,{children:[e.map((function(e){return Object(E.jsx)(oe,{goal:e},e.position)})),Object(E.jsx)("br",{}),Object(E.jsx)(ae,{})]})}function se(){var e=Object(u.useContext)(G),t=e.entries,n=e.projects;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h1",{children:"SettingsPage"}),"api/user = ","2ae0238cb610dc7c2f940e02379097a4",Object(E.jsxs)("span",{children:[Object(E.jsx)("h5",{children:"Projects"}),n.map((function(e){return Object(E.jsxs)("div",{children:[e.name," - ",e.id]},e.id)})),Object(E.jsx)(C.a,{onClick:function(){q(n)},size:"large",variant:"contained",color:"primary",children:"Send Projects to database"})]}),Object(E.jsxs)("span",{children:[Object(E.jsx)("h5",{children:"Entries"}),t.map((function(e){return Object(E.jsxs)("div",{children:[e.description," - ",e.id]},e.id)}))]})]})}function ue(){var e=Object(u.useState)((function(){return JSON.parse(localStorage.getItem("currentEntry")||"{}")})),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)((function(){return JSON.parse(localStorage.getItem("entries")||"[]")})),o=Object(s.a)(c,2),l=o[0],j=o[1],b=Object(u.useState)((function(){return JSON.parse(localStorage.getItem("projects")||"[]")})),f=Object(s.a)(b,2),p=f[0],d=f[1],O=Object(u.useState)((function(){return JSON.parse(localStorage.getItem("goals")||"[]")})),g=Object(s.a)(O,2),h=g[0],x=g[1],v=Object(u.useState)((function(){return JSON.parse(localStorage.getItem("favorites")||"[]")})),m=Object(s.a)(v,2),y=m[0],C=m[1],I=Object(u.useMemo)((function(){return{currentEntry:n,setCurrentEntry:r,entries:l,setEntries:j,projects:p,setProjects:d,goals:h,setGoals:x,favorites:y,setFavorites:C}}),[n,l,p,h,y]);return Object(u.useEffect)((function(){console.log("----------------------current changed to",n),localStorage.setItem("currentEntry",JSON.stringify(n))}),[n]),Object(u.useEffect)((function(){localStorage.setItem("entries",JSON.stringify(l)),l.forEach((function(e){e.isRunning&&r(e)}))}),[l]),Object(u.useEffect)((function(){console.log("projects changed",p),localStorage.setItem("projects",JSON.stringify(p))}),[p]),Object(u.useEffect)((function(){localStorage.setItem("goals",JSON.stringify(h))}),[h]),Object(u.useEffect)((function(){localStorage.setItem("favorites",JSON.stringify(y))}),[y]),Object(u.useEffect)((function(){function e(e){var t=new Set(e.map((function(e){return e.pid})));Array.from(t).filter((function(e){return e})).forEach((function(t){R.getProjectData(t,(function(n,r){n?console.log("Error getting projectData for project: ",t,n):(r.sum=0,e.forEach((function(e){e.pid===r.id&&e.duration>0&&(r.sum+=e.duration)})),console.log("Received project:",r,p),-1===p.findIndex((function(e){return e.id===r.id}))&&(p.push(r),d(p)))}))}))}console.log("Rendering App"),0===y.length&&Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=C,e.next=3,Z();case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:e.t2=e.t1,(0,e.t0)(e.t2);case 8:case"end":return e.stop()}}),e)})))(),R.getTimeEntries(function(){var e=new Date,t=e.getDay(),n=new Date;return 0===e.getDay()?n.setDate(e.getDate()-7):n.setDate(e.getDate()-(t-1)),n.setHours(0,0,0,0),n.toISOString()}(),(new Date).toISOString(),function(){var t=Object(i.a)(a.a.mark((function t(n,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n?console.log("Error getting timeEntries: ",n):(console.log("Received timeEntries:",r),r.forEach((function(e){e.isRunning=e.duration<0})),j(r),e(r));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}),[]),Object(E.jsx)("div",{className:"App",children:Object(E.jsxs)("header",{className:"App-header",children:[Object(E.jsxs)(k.b,{history:S,children:[Object(E.jsx)(k.a,{path:"/",exact:!0,component:te}),Object(E.jsxs)(G.Provider,{value:I,children:[Object(E.jsx)(k.a,{path:"/favorites",component:_}),Object(E.jsx)(k.a,{path:"/weekly",component:ie}),Object(E.jsx)(k.a,{path:"/settings",component:se})]})]}),Object(E.jsx)(w,{})]})})}c.a.render(Object(E.jsx)(ee.a,{children:Object(E.jsx)(ue,{})}),document.getElementById("root"))}},[[542,1,2]]]);
//# sourceMappingURL=main.bbe0411f.chunk.js.map